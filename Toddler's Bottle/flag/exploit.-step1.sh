#!/usr/bin/bash
var=$(which upx)

NONE='\033[00m'
RED='\033[01;31m'
GREEN='\033[01;32m'
YELLOW='\033[01;33m'	
BOLD='\033[1m'


echo -e "${RED}${CYAN}[+] Pwnable.kr flag challenge solution ${NONE}"
echo -e "${BOLD}${GREEN}[+] Coded by @whokilleddb ${NONE}"

if [ -z "$var" ]
then
      echo -e "${RED}[-] UPX NOT FOUND ${NONE}"
      echo -e "${YELLOW}[+] Installing UPX ${NONE}"
      if [ "$EUID" -ne 0 ]
        then echo -e "${RED}[-] Please run as root${NONE}"
        exit
      fi
      apt install upx
fi

if [ -z "$1" ]
then
	echo -e "${RED}[-] Input File Not Specified ${NONE}"
	exit
fi

dcom="decompressed-"$1
upx -d $1 -o $dcom

echo -e "${GREEN}[+] Successfully Created : $dcom ${NONE}"
